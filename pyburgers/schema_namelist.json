{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "PyBurgers Namelist Validation Schema",
    "description": "Schema to validate the configuration namelist for PyBurgers.",
    "type": "object",
    "properties": {
        "time": {
            "type": "object",
            "properties": {
                "nt": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "Total number of time steps to simulate."
                },
                "dt": {
                    "type": "number",
                    "exclusiveMinimum": 0,
                    "description": "Time step size in seconds."
                }
            },
            "required": ["nt", "dt"]
        },
        "physics": {
            "type": "object",
            "properties": {
                "noise": {
                    "type": "object",
                    "properties": {
                        "beta": { 
                            "type": "number",
                            "description": "Spectral exponent of FBM."
                        },
                        "amplitude": { 
                            "type": "number", 
                            "exclusiveMinimum": 0,
                            "description": "Amplitude of FBM."
                        }
                    },
                    "required": ["beta", "amplitude"]
                },
                "viscosity": { 
                    "type": "number", 
                    "exclusiveMinimum": 0,
                    "description": "Kinematic viscosity [m^2/s]"
                },
                "sgs_model": { 
                    "type": "integer", 
                    "minimum": 0, 
                    "maximum": 4,
                    "description": "Subgrid-scale model selector.",
                    "oneOf": [
                        { "const": 0, "description": "No SGS model" },
                        { "const": 1, "description": "Constant Smagorinsky" },
                        { "const": 2, "description": "Dynamic Smagorinsky" },
                        { "const": 3, "description": "Dynamic Wong-Lilly" },
                        { "const": 4, "description": "Deardorff 1.5-order TKE" }
                    ]
                }
            },
            "required": ["noise", "viscosity"]
        },
        "grid": {
            "type": "object",
            "properties": {
                "domain_length": {
                    "type": "number",
                    "exclusiveMinimum": 0,
                    "description": "Length of the periodic domain in meters (default: 2Ï€)."
                },
                "dns": {
                    "type": "object",
                    "properties": {
                        "nx": {
                            "type": "integer",
                            "minimum": 1,
                            "description": "Number of grid points for DNS resolution (must be even)."
                        }
                    },
                    "required": ["nx"]
                },
                "les": {
                    "type": "object",
                    "properties": {
                        "nx": {
                            "type": "integer",
                            "minimum": 1,
                            "description": "Number of grid points for LES resolution (must be even)."
                        }
                    },
                    "required": ["nx"]
                }
            },
            "required": ["dns", "les"]
        },
        "output": {
            "type": "object",
            "properties": {
                "t_save": {
                    "type": "number",
                    "exclusiveMinimum": 0,
                    "description": "Output interval in simulation seconds (not wall-clock time)."
                },
                "t_print": {
                    "type": "number",
                    "exclusiveMinimum": 0,
                    "description": "Progress reporting interval in simulation seconds (optional, defaults to t_save)."
                }
            },
            "required": ["t_save"]
        },
        "logging": {
            "type": "object",
            "properties": {
                "level": {
                    "type": "string",
                    "enum": ["DEBUG", "INFO", "WARNING", "ERROR", "CRITICAL"],
                    "description": "Logging severity.",
                    "oneOf": [
                      { "const": "DEBUG", "description": "Verbose diagnostics." },
                      { "const": "INFO", "description": "Normal runtime info." },
                      { "const": "WARNING", "description": "Potential issues." },
                      { "const": "ERROR", "description": "Errors that stop work." },
                      { "const": "CRITICAL", "description": "Serious failures." }
                    ]
                },
                "file": {
                    "type": "string",
                    "description": "Path to log file (optional, logs to console if omitted)."
                }
            },
            "required": ["level"]
        },
        "fftw": {
            "type": "object",
            "properties": {
                "planning": {
                    "type": "string",
                    "enum": ["FFTW_ESTIMATE", "FFTW_MEASURE", "FFTW_PATIENT", "FFTW_EXHAUSTIVE"],
                    "description": "FFTW planning strategy.",
                    "oneOf": [
                      { "const": "FFTW_ESTIMATE", "description": "Fastest plan; Slower FFTs." },
                      { "const": "FFTW_MEASURE", "description": "Balances planning vs speed." },
                      { "const": "FFTW_PATIENT", "description": "Slower plan; Faster FFTs." },
                      { "const": "FFTW_EXHAUSTIVE", "description": "Slowest plan; Fastest FFTs."}
                    ]
                },
                "threads": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "Number of threads for FFT operations."
                }
            },
            "required": ["planning", "threads"]
        }
    },
    "required": ["time", "physics", "grid", "output", "logging", "fftw"]
}
