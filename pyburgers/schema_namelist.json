{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "PyBurgers Namelist Validation Schema",
    "description": "Schema to validate the configuration namelist for PyBurgers.",
    "type": "object",
    "properties": {
        "time": {
            "type": "object",
            "properties": {
                "nt": { "type": "integer", "minimum": 1 },
                "dt": { "type": "number", "exclusiveMinimum": 0 }
            },
            "required": ["nt", "dt"]
        },
        "physics": {
            "type": "object",
            "properties": {
                "noise": {
                    "type": "object",
                    "properties": {
                        "alpha": { "type": "number" },
                        "amplitude": { "type": "number", "exclusiveMinimum": 0 }
                    },
                    "required": ["alpha", "amplitude"]
                },
                "viscosity": { "type": "number", "exclusiveMinimum": 0 },
                "sgs_model": { 
                    "type": "integer", 
                    "minimum": 0, 
                    "maximum": 4,
                    "description": "Subgrid-scale model selector.",
                    "oneOf": [
                        { "const": 0, "description": "No SGS model" },
                        { "const": 1, "description": "Constant Smagorinsky" },
                        { "const": 2, "description": "Dynamic Smagorinsky" },
                        { "const": 3, "description": "Dynamic Wong-Lilly" },
                        { "const": 4, "description": "Deardorff 1.5-order TKE" }
                    ]
                }
            },
            "required": ["noise", "viscosity"]
        },
        "grid": {
            "type": "object",
            "properties": {
                "domain_length": { "type": "number", "exclusiveMinimum": 0 },
                "dns": {
                    "type": "object",
                    "properties": {
                        "nx": { "type": "integer", "minimum": 1 }
                    },
                    "required": ["nx"]
                },
                "les": {
                    "type": "object",
                    "properties": {
                        "nx": { "type": "integer", "minimum": 1 }
                    },
                    "required": ["nx"]
                }
            },
            "required": ["dns", "les"]
        },
        "output": {
            "type": "object",
            "properties": {
                "t_save": { 
                    "type": "number", 
                    "exclusiveMinimum": 0,
                    "description": "Output interval in seconds."
                }
            },
            "required": ["t_save"]
        },
        "logging": {
            "type": "object",
            "properties": {
                "level": {
                    "type": "string",
                    "enum": ["DEBUG", "INFO", "WARNING", "ERROR", "CRITICAL"],
                    "description": "Logging severity.",
                    "oneOf": [
                      { "const": "DEBUG", "description": "Verbose diagnostics." },
                      { "const": "INFO", "description": "Normal runtime info." },
                      { "const": "WARNING", "description": "Potential issues." },
                      { "const": "ERROR", "description": "Errors that stop work." },
                      { "const": "CRITICAL", "description": "Serious failures." }
                    ]
                },
                "file": { "type": "string" }
            },
            "required": ["level"]
        },
        "fftw": {
            "type": "object",
            "properties": {
                "planning": {
                    "type": "string",
                    "enum": ["FFTW_ESTIMATE", "FFTW_MEASURE", "FFTW_PATIENT", "FFTW_EXHAUSTIVE"]
                },
                "threads": { "type": "integer", "minimum": 1 }
            },
            "required": ["planning", "threads"]
        }
    },
    "required": ["time", "physics", "grid", "output", "logging", "fftw"]
}
